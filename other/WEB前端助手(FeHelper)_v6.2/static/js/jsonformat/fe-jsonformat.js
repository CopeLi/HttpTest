baidu.jsonformat=(function(){var d=function(e){return document.getElementById(e)};var a=function(){d("errorMsg").innerHTML="";var h=d("jsonSource").value;if(!h){return}var j=null;var k=null;try{var f=/^([\w\.]+)\(\s*([\s\S]*)\s*\)$/igm;var g=f.exec(h);if(g!=null){j=g[1];var i=g[2];k=new Function("return "+i)()}}catch(e){d("errorMsg").innerHTML=e;return}try{if(k==null||typeof k!="object"){k=new Function("return "+h)();if(typeof k=="string"){k=new Function("return "+k)()}}}catch(e){d("errorMsg").innerHTML=e;return}if(k!=null&&typeof k=="object"){try{h=JSON.stringify(k)}catch(e){return}JsonFormatEntrance.clear();JsonFormatEntrance.format(h);if(j!=null){$("#jfCallbackName_start").html(j+"(");$("#jfCallbackName_end").html(")")}}};var b=function(){$("#btnFormat").click(function(f){a()});$("#jfContent").delegate(".kvov","click",function(f){$("#jfContent .kvov").removeClass("x-outline");$(this).removeClass("x-hover").addClass("x-outline");if(!$(f.target).is(".kvov .e")){f.stopPropagation()}else{$(f.target).parent().trigger("click")}}).delegate(".kvov","mouseover",function(f){$(this).addClass("x-hover");return false}).delegate(".kvov","mouseout",function(f){$(this).removeClass("x-hover")})};var c=function(){chrome.runtime.onMessage.addListener(function(f,e,g){if(f.type==MSG_TYPE.TAB_CREATED_OR_UPDATED&&f.event=="jsonformat"){if(f.content){d("jsonSource").value=(f.content);a()}}});$(function(){jQuery("#jsonSource").focus();b()})};return{init:c}})();baidu.jsonformat.init();